#summary One-sentence summary of this page.

= HLFS 用户手册 =

== 准备动作 ==
基本环境要求：
 * 32、64位Linux系统操作系统（我是在ubuntu10.4和Centos上进行开发的）
 * 2G  以上内存
===Hadoop 安装===
   hlfs需要使用hadoop hdfs的append功能实现log追加操作，因此我们需要选择hadoop-0.20-append或者cloudera的ch3版本（默认支持了append功能，不用再配置 dfs.support.append=true了，如果使用其他版本一定要打开该功能），关于hadoop append问题域的分析请见http://www.cloudera.com/blog/2009/07/file-appends-in-hdfs.<br>
   我们建议使用cloudera的ch3，安装方式参见  https://ccp.cloudera.com/display/CDHDOC/CDH3+Installation
===Xen 安装===   
   我们使用xen中的tapdisk2模式加载hlfs磁盘，因此需要使用xen4.0之上版本（如果低版本xen需要打上tapdisk2的patch)。因此我们建议使用xen4.1.x 。 对于dom0内核版本，我们建议不要用2.6.18的老内核，使用当前2.6.32以上的内核比较可靠。<br>
   关于xen的安装，网上资料很多。 也可以参见我们download中提供的资料http://code.google.com/p/cloudxy/downloads/detail?name=xen_guide.pd
   

== HLFS START UP ==
 # 获取hlfs代码和相关依赖库——在终端键入'svn checkout http://cloudxy.googlecode.com/svn/trunk/hlfs/  hlfs'
 # 编译hlfs
   # 安装cmake;安装glib库;安装java。
   # 修改在hlfs/src/CMakeLists.txt中配置你正确的java目录 'SET(JAVA_HOME   /usr/lib/jvm/java-6-sun)'。
   # 生成makefile:cd hlfs/build；cmake ../src（生成makefile)
   # make {all | libhlfs | tools | test} 
      * all: 生成所有库和工具
      * libhlfs: 生成hlfs动态库
      * tools: 生成所有工具
      * test: 生成测试用例
 * 注：hlfs目录说明
   ** src hlfs库源代码目录
   ** nbd-2.9.15 修改后的nbd-server/nbd-client源代码目录
   ** 3part 第三方库，目前包含hadoop相关;log库
   ** test 测试文件目录
   ** output 编译后的生成库和工具所在目录

   

== HLFS 存储虚拟机镜像 == 

== HLFS 用作虚拟网盘 == 