#summary 性能优化.

= 调优介绍 =

先大刀阔斧完完成从无到有的功能，初步跑通，增强自信。那下一步就该是抽丝剥茧搬的调优过程了。
调优的几个断言：
　* 调优过程将是无止尽的
  * 任何优化都是有代价的

HLFS项目存在大量可调整的理由和办法，可谓仁者见仁智者见智。我们将从从收益角度和实现代价考虑，逐步开展。
因为很多优化办法具备普遍意义，所以我们费一些笔墨描述之。
 

= 调优点 =

== indirect block read cache ==
每次访问data block，只要需要从磁盘中载入或者写入，就必须首先访问indirect block（如果db在cache则不需要再从磁盘载入），显然这些indirect block访问相当频繁，如果访问ib时，每每都操作磁盘，那对性能无疑是个重大损失。所以我们尽可能希望最近访问的ib能被缓存起来，从而避免磁盘访问。
所以，我们实现ICACHE缓存（indirect block cache），和DCATCH(data block cache)写缓存相比，ICACHE最大特点是它属于读缓存，并不需要向DCACHE那样WRITEBACK ——　