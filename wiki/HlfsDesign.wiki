=hadoop dfs log structure filesystem designe=
==背景介绍==
  HLFS的使用场景是为弹性云平台提供虚拟磁盘（类似amzaon的EBS）提供后台存储服务。它需要满足高可用性、高性能、能随机读写、快速故障恢复、数据快照、回滚等特性。

==实现简述==
  hadoop dfs 可被看做一个可靠的、随时可扩展的“磁盘”；但美中不足是其不能随机写，只能追加写入，因此还不能直接作为我们的镜像存储系统。那么我们需要借助log structrue filesystem理念，使用追加方式在hdfs上实现随机随机读写的要求。

==特性描述==
  * 用户态文件系统     —— 和标准的内核态posix接口文件系统不同，HLFS实现于用户态，以lib形式嵌入客户端。 不必完全实现posix接口规范 ，按需实现pread\pwrite等主要语意即可。
  * 支持随机读写       —— 文件要能支持随机读写（按照offset定位位置）。
  * 支持超大文件存储   —— 单个文件需可支持上T数据存储（这里文件对应的是虚拟机的磁盘大小）。
  * 仅支持单文件       —— 在我们应用场景中每个虚拟磁盘对应一个HLFS实例，因此最简化的设计是就只需要支持一个文件（对应虚拟机里一个磁盘）。
  * 面向客户端一致性 （client - orient ）—— 虚拟机磁盘同一时刻只能被挂载到一个虚拟机镜像中，因此只需要要保证对其挂载的虚拟机客户保证数据一致）
  * 支持快照、支持回滚 ——  文件可随时进行现场快照、可按需进行回滚（对于host服务的虚拟机，快照回滚是防止网站被入侵或者误操作造成数据污染、损坏的最有效手段）
  * 支持多数据多副本  —— 数据存储多份，保证数据安全性和就近访问优化（hadoop dfs为我们实现这点）
  * 集群系统可动态扩容 ——  存储节点（PC服务器）可动态添加到集群中，而不影响集群正常服务（hadoop dfs为我们实现这点）
  * 集群系统可，透明故障切换 ——  存储节点出现故障，不影响服务，对用户透明（hadoop dfs为我们实现这点）